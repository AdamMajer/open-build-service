- diff_list.each_with_index do |(name, file_info), file_index|
  - state = file_info['state']
  .accordion.mb-2{ id: "diff-list-#{name.parameterize}" }
    .accordion-item
      %h2.accordion-header
        %button.accordion-button.text-bg-light{ type: 'button', data: { 'bs-toggle': 'collapse',
                                                                        'bs-target': "#diff-item-#{name.parameterize}" },
                                                aria: { expanded: 'true', controls: "diff-item-#{name.parameterize}" } }
          - if (old_file = file_info['old'])
            = changed_filename(old_file['name'], name, state)
          - else
            = name
          %span.badge.ms-1{ class: badge_for_state(state) }= state.capitalize
      .accordion-collapse.collapse{ class: expand?(name, state) ? 'show' : '', id: "diff-item-#{name.parameterize}", 'data-object': view_id }
        = render(DiffComponent.new(diff: file_info.dig('diff', '_content'), file_index:, commentable:))
